<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#0b2a44" />
  <title>Yodo-Shop for Water</title>

  <link rel="manifest" href="./manifest.json" />

  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color: #ffffff;
      background:
        linear-gradient(rgba(6,18,31,.85), rgba(6,18,31,.95)),
        url("./assets/fondo.jpg") center / cover no-repeat fixed;
      min-height: 100vh;
    }

    .wrap {
      max-width: 720px;
      margin: auto;
      padding: 24px 18px 50px;
    }

    .logo {
      width: 190px;
      margin-bottom: 18px;
    }

    h1 {
      font-size: clamp(24px, 4.2vw, 34px);
      font-weight: 900;
      line-height: 1.15;
      margin-bottom: 8px;
    }

    .subtitle {
      font-size: 14.5px;
      color: #cfd9e6;
      margin-bottom: 18px;
    }

    .stores {
      display: flex;
      flex-direction: column;
      gap: 9px;
      margin-bottom: 26px;
    }

    .store {
      background: rgba(255,255,255,.14);
      border: 1px solid rgba(255,255,255,.18);
      border-radius: 14px;
      padding: 11px 13px;
      display: flex;
      align-items: center;
      gap: 12px;
      cursor: pointer;
      transition: background .15s ease, transform .15s ease;
      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);
    }

    .store:hover {
      background: rgba(255,255,255,.22);
      transform: translateY(-1px);
    }

    .store:first-child,
    .store:nth-child(2) {
      background: rgba(255,255,255,.18);
    }

    .store-logo {
      width: 38px;
      height: 38px;
      border-radius: 10px;
      background: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    .store-logo img {
      width: 70%;
      height: 70%;
      object-fit: contain;
    }

    .store-text {
      display: flex;
      flex-direction: column;
    }

    .store-name {
      font-size: 15px;
      font-weight: 900;
      line-height: 1.1;
    }

    .store-desc {
      font-size: 12.5px;
      color: #cfd9e6;
      margin-top: 2px;
    }

    .cta {
      background: #000;
      color: #fff;
      border: none;
      border-radius: 18px;
      padding: 16px 22px;
      font-size: 16px;
      font-weight: 900;
      cursor: pointer;
      margin-bottom: 14px;
      width: 100%;
      max-width: 420px;
    }

    .cta:hover { background: #111; }

    .project {
      font-size: 13.5px;
      color: #cfd9e6;
      border-top: 1px solid rgba(255,255,255,.15);
      padding-top: 14px;
    }

    .project strong { color: #fff; }

    .project a {
      color: #fff;
      font-weight: 900;
      text-decoration: none;
      white-space: nowrap;
    }

    .project a:hover { text-decoration: underline; }
  </style>
</head>

<body>
  <div class="wrap">

    <img src="./assets/logo.png" class="logo" alt="Yodo">

    <!-- CHIP: bandera + pa√≠s -->
    <div style="display:flex; justify-content:flex-end; margin-top:-6px; margin-bottom:14px;">
      <button id="changeCountry" type="button" aria-label="Change country / language"
        style="
          display:flex; align-items:center; gap:8px;
          padding:10px 12px;
          border-radius: 999px;
          border: 1px solid rgba(255,255,255,.18);
          background: rgba(255,255,255,.10);
          color:#fff;
          font-weight:900;
          cursor:pointer;
          backdrop-filter: blur(8px);
          -webkit-backdrop-filter: blur(8px);
        ">
        <span id="countryFlag" style="font-size:16px;">üåç</span>
        <span id="countryCode" style="font-size:12.5px; letter-spacing:.06em;">EN</span>
        <span style="opacity:.8;">‚ñæ</span>
      </button>
    </div>

    <h1 id="t_headline">
      Cada vez que compras con nuestros enlaces, ayudas a que m√°s personas tengan acceso a agua potable.
    </h1>
    <p class="subtitle" id="t_subtitle">¬øY lo mejor? No te cuesta nada.</p>

    <div class="stores">

      <div class="store" data-store="AMAZON" data-scope="global" onclick="go('AMAZON')">
        <div class="store-logo">
          <img src="./assets/assets/logos/logoamazon.jpg" alt="Amazon">
        </div>
        <div class="store-text">
          <div class="store-name">Amazon</div>
          <div class="store-desc" id="desc_amazon">Compra online</div>
        </div>
      </div>

      <div class="store" data-store="BOOKING" data-scope="global" onclick="go('BOOKING')">
        <div class="store-logo">
          <img src="./assets/assets/logos/logobooking2.png" alt="Booking">
        </div>
        <div class="store-text">
          <div class="store-name">Booking</div>
          <div class="store-desc" id="desc_booking">Viajes y hoteles</div>
        </div>
      </div>

      <div class="store" data-store="EL_CORTE_INGLES" data-scope="local" onclick="go('EL_CORTE_INGLES')">
        <div class="store-logo">
          <img src="./assets/assets/logos/logoeci.jpg" alt="El Corte Ingl√©s">
        </div>
        <div class="store-text">
          <div class="store-name">El Corte Ingl√©s</div>
          <div class="store-desc" id="desc_eci">Moda, hogar y m√°s</div>
        </div>
      </div>

      <div class="store" data-store="OMIO" data-scope="global" onclick="go('OMIO')">
        <div class="store-logo">
          <img src="./assets/assets/logos/logoomio.png" alt="Omio">
        </div>
        <div class="store-text">
          <div class="store-name">Omio</div>
          <div class="store-desc" id="desc_omio">Trenes, buses y vuelos</div>
        </div>
      </div>

      <div class="store" data-store="KIWI" data-scope="global" onclick="go('KIWI')">
        <div class="store-logo">
          <img src="./assets/assets/logos/logokiwi.png" alt="Kiwi.com">
        </div>
        <div class="store-text">
          <div class="store-name">Kiwi.com</div>
          <div class="store-desc" id="desc_kiwi">Vuelos baratos</div>
        </div>
      </div>

    </div>

    <button class="cta" id="t_cta" onclick="goDesktop()">Instalar Yodo en ordenador</button>

    <div class="project">
      <strong id="t_projectStrong">√öltimo proyecto.</strong>
      <span id="t_projectText">Apoyamos iniciativas que llevan agua potable a comunidades rurales.</span>
      <a id="t_projectLink" href="https://withyodo.com/es/agua-para-10-millones/" target="_blank" rel="noopener noreferrer">Ver proyecto ‚Üí</a>
    </div>

  </div>

  <script>
    // ===============================
    // Pa√≠s + idioma
    // ===============================
    const COUNTRY_KEY = "preferred_country";

    const COUNTRIES = [
      { code: "ES", label: "Espa√±a", flag: "üá™üá∏" },
      { code: "GB", label: "UK", flag: "üá¨üáß" },
      { code: "FR", label: "France", flag: "üá´üá∑" },
      { code: "DE", label: "Germany", flag: "üá©üá™" },
      { code: "NL", label: "Netherlands", flag: "üá≥üá±" },
      { code: "IT", label: "Italy", flag: "üáÆüáπ" },
      { code: "US", label: "USA", flag: "üá∫üá∏" },
      { code: "OTHER", label: "Others", flag: "üåç" }
    ];

    const COUNTRY_TO_LOCALE = {
      ES: "es",
      GB: "en",
      FR: "fr",
      DE: "de",
      NL: "nl",
      IT: "it",
      US: "en",
      OTHER: "en"
    };

    function getCountry() {
      return localStorage.getItem(COUNTRY_KEY) || null;
    }
    function setCountry(code) {
      localStorage.setItem(COUNTRY_KEY, code);
    }
    function getLocale() {
      const c = getCountry() || "OTHER";
      return COUNTRY_TO_LOCALE[c] || "en";
    }

    // ===============================
    // i18n
    // ===============================
    const I18N = {
      es: {
        pick: "¬øEn qu√© pa√≠s compras normalmente?",
        tip: "Tip: puedes cambiarlo cuando quieras.",
        headline: "Cada vez que compras con nuestros enlaces, ayudas a que m√°s personas tengan acceso a agua potable.",
        subtitle: "¬øY lo mejor? No te cuesta nada.",
        cta: "Instalar Yodo en ordenador",
        projectStrong: "√öltimo proyecto.",
        projectText: "Apoyamos iniciativas que llevan agua potable a comunidades rurales.",
        projectLink: "Ver proyecto ‚Üí",
        desc_amazon: "Compra online",
        desc_booking: "Viajes y hoteles",
        desc_eci: "Moda, hogar y m√°s",
        desc_omio: "Trenes, buses y vuelos",
        desc_kiwi: "Vuelos baratos"
      },
      en: {
        pick: "Which country do you usually shop in?",
        tip: "Tip: you can change it anytime.",
        headline: "Every time you shop with our links, you help more people get access to safe drinking water.",
        subtitle: "And the best part? It costs you nothing.",
        cta: "Install Yodo on desktop",
        projectStrong: "Latest project.",
        projectText: "We support initiatives that bring safe drinking water to rural communities.",
        projectLink: "View project ‚Üí",
        desc_amazon: "Shop online",
        desc_booking: "Hotels & travel",
        desc_eci: "Fashion, home & more",
        desc_omio: "Trains, buses & flights",
        desc_kiwi: "Cheap flights"
      },
      fr: {
        pick: "Dans quel pays achetez-vous le plus souvent ?",
        tip: "Astuce : vous pouvez le modifier √† tout moment.",
        headline: "Chaque fois que vous achetez avec nos liens, vous aidez davantage de personnes √† avoir acc√®s √† l‚Äôeau potable.",
        subtitle: "Et le mieux ? √áa ne vous co√ªte rien.",
        cta: "Installer Yodo sur ordinateur",
        projectStrong: "Dernier projet.",
        projectText: "Nous soutenons des initiatives qui apportent de l‚Äôeau potable aux communaut√©s rurales.",
        projectLink: "Voir le projet ‚Üí",
        desc_amazon: "Acheter en ligne",
        desc_booking: "H√¥tels & voyages",
        desc_eci: "Mode, maison & plus",
        desc_omio: "Trains, bus & vols",
        desc_kiwi: "Vols pas chers"
      },
      de: {
        pick: "In welchem Land kaufst du normalerweise ein?",
        tip: "Tipp: Du kannst das jederzeit √§ndern.",
        headline: "Jedes Mal, wenn du √ºber unsere Links einkaufst, hilfst du mehr Menschen Zugang zu sauberem Trinkwasser zu bekommen.",
        subtitle: "Und das Beste? Es kostet dich nichts.",
        cta: "Yodo am Desktop installieren",
        projectStrong: "Letztes Projekt.",
        projectText: "Wir unterst√ºtzen Initiativen, die l√§ndliche Gemeinden mit Trinkwasser versorgen.",
        projectLink: "Projekt ansehen ‚Üí",
        desc_amazon: "Online einkaufen",
        desc_booking: "Hotels & Reisen",
        desc_eci: "Mode, Zuhause & mehr",
        desc_omio: "Z√ºge, Busse & Fl√ºge",
        desc_kiwi: "G√ºnstige Fl√ºge"
      },
      nl: {
        pick: "In welk land koop je meestal?",
        tip: "Tip: je kunt dit altijd wijzigen.",
        headline: "Elke keer dat je via onze links koopt, help je meer mensen toegang te krijgen tot veilig drinkwater.",
        subtitle: "En het beste? Het kost je niets.",
        cta: "Yodo op desktop installeren",
        projectStrong: "Laatste project.",
        projectText: "We steunen initiatieven die schoon drinkwater naar plattelandsgemeenschappen brengen.",
        projectLink: "Project bekijken ‚Üí",
        desc_amazon: "Online winkelen",
        desc_booking: "Hotels & reizen",
        desc_eci: "Mode, wonen & meer",
        desc_omio: "Treinen, bussen & vluchten",
        desc_kiwi: "Goedkope vluchten"
      },
      it: {
        pick: "In quale paese acquisti di solito?",
        tip: "Suggerimento: puoi cambiarlo in qualsiasi momento.",
        headline: "Ogni volta che acquisti con i nostri link, aiuti pi√π persone ad avere accesso all‚Äôacqua potabile.",
        subtitle: "E la cosa migliore? Non ti costa nulla.",
        cta: "Installa Yodo su computer",
        projectStrong: "Ultimo progetto.",
        projectText: "Sosteniamo iniziative che portano acqua potabile alle comunit√† rurali.",
        projectLink: "Vedi progetto ‚Üí",
        desc_amazon: "Compra online",
        desc_booking: "Hotel e viaggi",
        desc_eci: "Moda, casa e altro",
        desc_omio: "Treni, bus e voli",
        desc_kiwi: "Voli economici"
      }
    };

    function tr(key) {
      const locale = getLocale();
      return (I18N[locale] && I18N[locale][key]) || (I18N.en && I18N.en[key]) || "";
    }

    // ===============================
    // Links afiliado por pa√≠s (config)
    // ===============================
    const AFF = {
      ES: {
        AMAZON: "TODO_AMAZON_ES",
        BOOKING: "TODO_BOOKING_ES",
        OMIO: "TODO_OMIO_ES",
        KIWI: "TODO_KIWI_ES",
        EL_CORTE_INGLES: "https://tidd.ly/4aEdfSb"
      },
      GB: { AMAZON: "TODO_AMAZON_GB", BOOKING: "TODO_BOOKING_GB", OMIO: "TODO_OMIO_GB", KIWI: "TODO_KIWI_GB" },
      FR: { AMAZON: "TODO_AMAZON_FR", BOOKING: "TODO_BOOKING_FR", OMIO: "TODO_OMIO_FR", KIWI: "TODO_KIWI_FR" },
      DE: { AMAZON: "TODO_AMAZON_DE", BOOKING: "TODO_BOOKING_DE", OMIO: "TODO_OMIO_DE", KIWI: "TODO_KIWI_DE" },
      NL: { AMAZON: "TODO_AMAZON_NL", BOOKING: "TODO_BOOKING_NL", OMIO: "TODO_OMIO_NL", KIWI: "TODO_KIWI_NL" },
      IT: { AMAZON: "TODO_AMAZON_IT", BOOKING: "TODO_BOOKING_IT", OMIO: "TODO_OMIO_IT", KIWI: "TODO_KIWI_IT" },
      US: { AMAZON: "TODO_AMAZON_US", BOOKING: "TODO_BOOKING_US", OMIO: "TODO_OMIO_US", KIWI: "TODO_KIWI_US" },
      OTHER: { AMAZON: "TODO_AMAZON_OTHER", BOOKING: "TODO_BOOKING_OTHER", OMIO: "TODO_OMIO_OTHER", KIWI: "TODO_KIWI_OTHER" }
    };

    // ===============================
    // Navegaci√≥n
    // ===============================
    function go(k) {
      const country = getCountry() || "OTHER";
      const map = AFF[country] || AFF.OTHER;
      const url = map && map[k];

      if (!url || url.startsWith("TODO_")) return;

      window.location.href = url;
    }
    window.go = go;

    function goDesktop() {
      window.location.href = "https://withyodo.com";
    }
    window.goDesktop = goDesktop;

    // ===============================
    // Chip bandera + pa√≠s
    // ===============================
    function updateCountryChip() {
      const code = getCountry() || "OTHER";
      const c = COUNTRIES.find(x => x.code === code) || { flag: "üåç" };

      const flagEl = document.getElementById("countryFlag");
      const codeEl = document.getElementById("countryCode");

      if (flagEl) flagEl.textContent = c.flag;
      if (codeEl) codeEl.textContent = (code === "OTHER") ? "EN" : code;
    }

    // ===============================
    // Aplicar UI
    // ===============================
    function applyCountryUI() {
      const country = getCountry() || "OTHER";
      const locale = getLocale();
      document.documentElement.lang = locale;

      const el = (id) => document.getElementById(id);

      if (el("t_headline")) el("t_headline").textContent = tr("headline");
      if (el("t_subtitle")) el("t_subtitle").textContent = tr("subtitle");
      if (el("t_cta")) el("t_cta").textContent = tr("cta");
      if (el("t_projectStrong")) el("t_projectStrong").textContent = tr("projectStrong");
      if (el("t_projectText")) el("t_projectText").textContent = tr("projectText");
      if (el("t_projectLink")) el("t_projectLink").textContent = tr("projectLink");

      if (el("desc_amazon")) el("desc_amazon").textContent = tr("desc_amazon");
      if (el("desc_booking")) el("desc_booking").textContent = tr("desc_booking");
      if (el("desc_eci")) el("desc_eci").textContent = tr("desc_eci");
      if (el("desc_omio")) el("desc_omio").textContent = tr("desc_omio");
      if (el("desc_kiwi")) el("desc_kiwi").textContent = tr("desc_kiwi");

      // ECI solo ES
      document.querySelectorAll(".store[data-store]").forEach((card) => {
        const storeId = card.getAttribute("data-store");
        if (storeId === "EL_CORTE_INGLES") {
          card.style.display = (country === "ES") ? "" : "none";
        } else {
          card.style.display = "";
        }
      });

      updateCountryChip();
    }

    // ===============================
    // Modal (bottom sheet, dark glass)
    // ===============================
    function openCountryPicker() {
      const existing = document.getElementById("countryModal");
      if (existing) existing.remove();

      const current = getCountry() || "OTHER";

      const modal = document.createElement("div");
      modal.id = "countryModal";
      modal.style.cssText = `
        position: fixed; inset: 0;
        background: rgba(0,0,0,.55);
        display: flex; align-items: flex-end; justify-content: center;
        z-index: 9999;
        padding: 14px;
      `;

      const sheet = document.createElement("div");
      sheet.style.cssText = `
        width: 100%;
        max-width: 720px;
        border-radius: 18px;
        background: rgba(255,255,255,.10);
        border: 1px solid rgba(255,255,255,.16);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        box-shadow: 0 20px 60px rgba(0,0,0,.45);
        padding: 14px;
      `;

      sheet.innerHTML = `
        <div style="display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:10px;">
          <div style="display:flex; flex-direction:column;">
            <div style="font-weight:900; font-size:15px; line-height:1.2;">${tr("pick")}</div>
            <div style="font-size:12.5px; color:#cfd9e6; margin-top:2px;">${tr("tip")}</div>
          </div>
          <button id="closeCountryModal" type="button"
            style="border:1px solid rgba(255,255,255,.18); background: rgba(0,0,0,.25); color:#fff;
                   border-radius: 12px; padding: 10px 12px; font-weight:900; cursor:pointer;">
            ‚úï
          </button>
        </div>

        <div id="countryGrid" style="display:grid; grid-template-columns:repeat(2,1fr); gap:10px;"></div>
      `;

      modal.appendChild(sheet);
      document.body.appendChild(modal);

      const grid = sheet.querySelector("#countryGrid");

      COUNTRIES.forEach((c) => {
        const isSelected = c.code === current;

        const btn = document.createElement("button");
        btn.type = "button";
        btn.style.cssText = `
          width: 100%;
          border-radius: 14px;
          padding: 12px 12px;
          border: 1px solid rgba(255,255,255,.18);
          background: ${isSelected ? "rgba(255,255,255,.18)" : "rgba(255,255,255,.10)"};
          color: #fff;
          text-align: left;
          cursor: pointer;
          display:flex; align-items:center; justify-content:space-between; gap:10px;
          transition: transform .12s ease, background .12s ease;
        `;

        btn.innerHTML = `
          <div style="display:flex; align-items:center; gap:10px;">
            <span style="font-size:18px;">${c.flag}</span>
            <span style="font-weight:900; font-size:14px;">${c.label}</span>
          </div>
          <span style="opacity:${isSelected ? "1" : "0"}; font-weight:900;">‚úì</span>
        `;

        btn.onclick = () => {
          setCountry(c.code);
          applyCountryUI();
          modal.remove();
        };

        grid.appendChild(btn);
      });

      sheet.querySelector("#closeCountryModal").onclick = () => modal.remove();

      modal.addEventListener("click", (e) => {
        if (e.target === modal) modal.remove();
      });
    }

    // ===============================
    // Init
    // ===============================
    document.addEventListener("DOMContentLoaded", () => {
      if (!getCountry()) openCountryPicker();
      applyCountryUI();

      const change = document.getElementById("changeCountry");
      if (change) change.addEventListener("click", openCountryPicker);
    });
  </script>

</body>
</html>






